import{f as X,u as Z,g as I,h as ee,P as te,t as ae,i as se,j as x,k as f,l as a,m as le,n as O,p as re,R as F,q as ne,s as ie,v as oe,x as ue,y as ce,z as j,A as P,C as he,B as ve,D as pe,E as me,F as ge,G as ye,H as de,I as _,J as Ee,K as C}from"./app-hKWIvdsu.js";const Ae=["/","/intro.html","/slides.html","/communicationEngineer/","/bigdata/","/en/","/en/intro.html","/en/slides.html","/js/","/js/mouseClick.html","/react/","/react/interview.html","/react/sourceCode.html","/vue/","/webpack/","/webpack/interview.html","/webpack/sourceCode.html","/communicationEngineer/comprehensiveAbility/","/communicationEngineer/internetTechnology/","/communicationEngineer/internetTechnology/computerNetworksProtocols.html","/communicationEngineer/internetTechnology/exchangeTechnology.html","/communicationEngineer/internetTechnology/internet.html","/communicationEngineer/internetTechnology/lan.html","/communicationEngineer/internetTechnology/networkOperatingSystem.html","/bigdata/machineLearnAlgorithms/C4dot5Algorithm.html","/bigdata/machineLearnAlgorithms/CART.html","/bigdata/machineLearnAlgorithms/ID3Algorithm.html","/bigdata/machineLearnAlgorithms/","/en/demo/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/markdown.html","/en/demo/page.html","/en/posts/cherry.html","/en/posts/dragonfruit.html","/en/posts/strawberry.html","/en/posts/tomato.html","/vue/vue2/","/vue/vue2/interview.html","/vue/vue2/sourceCode.html","/vue/vue3/","/vue/vue3/interview.html","/vue/vue3/sourceCode.html","/webpack/principle/","/webpack/principle/loader.html","/en/posts/apple/1.html","/en/posts/apple/2.html","/en/posts/apple/3.html","/en/posts/apple/4.html","/en/posts/banana/1.html","/en/posts/banana/2.html","/en/posts/banana/3.html","/en/posts/banana/4.html","/404.html","/en/posts/","/en/posts/apple/","/en/posts/banana/","/category/","/category/%E7%AC%94%E8%AE%B0/","/category/%E9%9D%A2%E8%AF%95%E9%A2%98/","/category/%E6%BA%90%E7%A0%81/","/category/%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B%E5%B8%88%E8%80%83%E8%AF%95/","/category/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/","/en/category/","/en/category/guide/","/en/category/cherry/","/en/category/dragon-fruit/","/en/category/fruit/","/en/category/strawberry/","/en/category/vegetable/","/en/category/apple/","/en/category/banana/","/tag/","/tag/js/","/tag/css/","/tag/react/","/tag/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/","/tag/webpack/","/tag/%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7/","/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","/tag/%E7%AE%97%E6%B3%95/","/tag/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/","/tag/%E5%A4%A7%E6%95%B0%E6%8D%AE/","/tag/vue/","/en/tag/","/en/tag/disable/","/en/tag/encryption/","/en/tag/markdown/","/en/tag/page-config/","/en/tag/guide/","/en/tag/red/","/en/tag/small/","/en/tag/round/","/en/tag/big/","/en/tag/yellow/","/en/tag/curly/","/en/tag/long/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],we="SEARCH_PRO_QUERY_HISTORY",y=_(we,[]),be=()=>{const{queryHistoryCount:l}=C;return{enabled:l>0,queryHistory:y,addQueryHistory:i=>{y.value=Array.from(new Set([i,...y.value.slice(0,l-1)]))},removeQueryHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}},q=l=>Ae[l.id]+("anchor"in l?`#${l.anchor}`:""),ke="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=C,d=_(ke,[]),fe=()=>({enabled:$>0,resultHistory:d,addResultHistory:r=>{{const i={link:q(r),display:r.display};"header"in r&&(i.header=r.header),d.value=[i,...d.value.slice(0,$-1)]}},removeResultHistory:r=>{d.value=[...d.value.slice(0,r),...d.value.slice(r+1)]}}),Ce=l=>{const r=he(),i=I(),H=ve(),o=x(0),E=f(()=>o.value>0),v=pe([]);return me(()=>{const{search:B,terminate:p}=ge(),A=ye(g=>{const w=g.join(" "),{searchFilter:m=s=>s,splitWord:L,suggestionsFilter:n,...u}=r.value;w?(o.value+=1,B(g.join(" "),i.value,u).then(s=>m(s,w,i.value,H.value)).then(s=>{o.value-=1,v.value=s}).catch(s=>{console.warn(s),o.value-=1,o.value||(v.value=[])})):v.value=[]},C.searchDelay-C.suggestDelay);O([l,i],([g])=>A(g),{immediate:!0}),de(()=>{p()})}),{isSearching:E,results:v}};var Be=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const i=Z(),H=I(),o=ee(te),{addQueryHistory:E,queryHistory:v,removeQueryHistory:B}=be(),{resultHistory:p,addResultHistory:A,removeResultHistory:g}=fe(),w=ae(l,"queries"),{results:m,isSearching:L}=Ce(w),n=se({isQuery:!0,index:0}),u=x(0),s=x(0),T=f(()=>v.value.length>0||p.value.length>0),R=f(()=>m.value.length>0),D=f(()=>m.value[u.value]||null),U=()=>{const{isQuery:e,index:t}=n;t===0?(n.isQuery=!e,n.index=e?p.value.length-1:v.value.length-1):n.index=t-1},Y=()=>{const{isQuery:e,index:t}=n;t===(e?v.value.length-1:p.value.length-1)?(n.isQuery=!e,n.index=0):n.index=t+1},M=()=>{u.value=u.value>0?u.value-1:m.value.length-1,s.value=D.value.contents.length-1},z=()=>{u.value=u.value<m.value.length-1?u.value+1:0,s.value=0},G=()=>{s.value<D.value.contents.length-1?s.value+=1:z()},J=()=>{s.value>0?s.value-=1:M()},Q=e=>e.map(t=>Ee(t)?t:a(t[0],t[1])),K=e=>{if(e.type==="customField"){const t=ue[e.index]||"$content",[c,k=""]=ce(t)?t[H.value].split("$content"):t.split("$content");return e.display.map(h=>a("div",Q([c,...h,k])))}return e.display.map(t=>a("div",Q(t)))},b=()=>{u.value=0,s.value=0,r("updateQuery",""),r("close")},N=()=>a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.queryHistory),v.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:n.isQuery&&n.index===t}],onClick:()=>{r("updateQuery",e)}},[a(j,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:c=>{c.preventDefault(),c.stopPropagation(),B(t)}})]))])),V=()=>a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.resultHistory),p.value.map((e,t)=>a(F,{to:e.link,class:["search-pro-result-item",{active:!n.isQuery&&n.index===t}],onClick:()=>{b()}},()=>[a(j,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(c=>Q(c)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:c=>{c.preventDefault(),c.stopPropagation(),g(t)}})]))]));return le("keydown",e=>{if(l.isFocusing){if(R.value){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const t=D.value.contents[s.value];E(l.queries.join(" ")),A(t),i.push(q(t)),b()}}else if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=n;n.isQuery?(r("updateQuery",v.value[t]),e.preventDefault()):(i.push(p.value[t].link),b())}}}),O([u,s],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!R.value:!T.value}],id:"search-pro-results"},l.queries.length?L.value?a(re,{hint:o.value.searching}):R.value?a("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:t},c)=>{const k=u.value===c;return a("li",{class:["search-pro-result-list-item",{active:k}]},[a("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((h,W)=>{const S=k&&s.value===W;return a(F,{to:q(h),class:["search-pro-result-item",{active:S,"aria-selected":S}],onClick:()=>{E(l.queries.join(" ")),A(h),b()}},()=>[h.type==="text"?null:a(h.type==="title"?ne:h.type==="heading"?ie:oe,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[h.type==="text"&&h.header?a("div",{class:"content-header"},h.header):null,a("div",K(h))])])})])})):o.value.emptyResult:T.value?[N(),V()]:o.value.emptyHistory)}});export{Be as default};
